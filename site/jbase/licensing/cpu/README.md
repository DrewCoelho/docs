# CPU Licensing

<PageHeader />

## jBASE Licensing for release 5.8 onwards

**Preliminary**

There is a new licensing scheme for jBASE from release 5.8 onwards. The old licensing scheme will still be supported for the time being.

The main features of the new scheme are
• It allows for CPU based licensing.  
• Licenses need on-line activation and validation.  
• Dynamic licenses (later release).  

It is very important to note that the new licensing is server based. Once the license has been activated and applied (see later), then after a 7-day period, jBASE will begin to validate the license is still valid. Once validated, the cycle starts again.

If, after a further 7 days (i.e. 14 days in total), jBASE cannot re-validate the license, then jBASE will stop new connections.

While this document explains all the detail of jBASE licensing, the basic operation is straightforward and involves
• Obtaining a licence key from Zumasys
• Activating and applying the license by running the following command

```bash
$ jlicense activate --license=XXXX-XXXX-XXXX-XXXX
```

For developers, a free 2-user license is available, and this is documented later.

## Obtaining a jBASE license

When you purchase jBASE from Zumasys or one of their partners, you will be issued with a license key in the format XXXX-XXXX-XXXX-XXXX. This can be used on any machine on any jBASE installation. However, once the license has been activated it is tied to that machine and that installation and you will need to de-activate the license if you wish to move it – or if you re-install jBASE, this is explained later.

## Activating a license

Once you have been supplied with a license key in the format XXXX-XXXX-XXXX-XXXX, you need to activate and apply it using the ‘jlicense’ command. Note that once activated, it will be tied to the jBASE installation where you ran the activate from and will no longer be available unless you follow the deactivation procedure, detailed later.

```bash
$ jlicense activate --license=ABCD-EFGH-IJKL-MNOP

License is valid. Status is active
License Key        : ABCD-EFGH-IJKL-MNOP
Status             : active
Company name       :
Host name          : deepthought
Product attributes : type=user
                     count=128
                     edition=developer
                     products=7
                     multiSession=0
                     expiryDate=2020 09 22
                     validity=7
                     grace=7
                     expiryDateUTC=1600732800
License successfully activated for 128 user at 11:58:44  08 SEP 2020
License successfully applied
```

You can also add the --verbose option, in which case the output shows details of the socket request.

This will change the status of the license (on the Zumasys license server) to ‘activated’ and place the license key in file $JBCRELEASEDIR/config/jbase_cpu_license. Because of the nature of the license not being portable, it is not in the system profile.

## Checking your license

Run the ‘info’ command. This also shows details if you are running an old license.

```bash
$ jlicense info –verbose
```

## Emergency license

There are 2 forms of emergency licensing.

The first emergency license can be generated by the customer on the licensing portal [ Details TBD], and manually applied to jBASE using [ Details TBD]

The second emergency licensing is when all else fails. To enable a local emergency license, perform the following steps.

• Shut down jBASE -- log off all users, close down printers, stop demons and services such as jRFS.
• Run the following command

```bash
$ jlicense emergency

This option generates an emergency license.

WARNING: This will over-write any existing license definition, so make a backup of file '/home/jbase/config/jbase_cpu_license'.

Once this license is generated, you will need to shut down jBASE completely in order to apply it, which means logging off all users, shutting down background jobs and services such as jDLS, jbase_agent, printers.

You will also need to run 'jlicense ipc'

Do you wish to continue (Y/N) ? y
License successfully activated for 4 CPUs at 12:50:36  08 SEP 2020
```

• For Linux/AIX systems you must remove all the system IPC resources (semaphores, shared memory) and this can be achieved by executing ‘jlicense ipc’.

• When the first jBASE process starts, a 4 CPU license will be enabled with a validity of 8 hours.

The above steps do not require any communication with the Zumasys licensing server nor any other internet access.

As you are warned by the process, it will overwrite any existing license definition in $JBCRELEASEDIR/config/jbase_cpu_license, so back that up if necessary. What is more likely is that you will be given a new license which you will activate with something like this (as documented earlier)

```bash
$ jlicense activate --license=XXXX-XXXX-XXXX-XXXX
```

The above steps can be repeated as often as is required until a resolution to the licensing problem can be achieved.

### Note

>This emergency licensing is for exactly that -- emergencies. It must not be used as a work-around to bypass jBASE licensing as this constitutes a breach of contract

## Deactivation and moving systems

From time to time you will want to move your jBASE system elsewhere. This could be for a number of reasons
• You re-install it on the same system
• Your machine fails and you move to a backup machine.
• You upgrade to a different machine.

In these cases, your jBASE license is portable. It is not tied to any particular machine or architecture. It is tied to the jBASE installation when you activated the license. This means if you save/restore your jBASE install files, it is likely you will need to deactivate and activate your license again.

All you need to do is de-activate the license. Once de-activated, you can re-use the license again on another system

There are 2 mechanisms for de-activating the license.

• The first way to deactivate a jBASE license is by logging on to the Zumasys licensing portal and manually deactivating the license [ Details TBD]

• The second way to deactivate to deactivate your license is by using the ‘jlicense deactivate’ mechanism as shown below. Of course, this only works on planned installations -- if, for example your machine fails, you will not be able to deactivate the license using the ‘jlicense deactivate’ and will need to use the licensing portal detail above.

```bash
$ jlicense deactivate
License successfully deactivated for current machine.
```

### WARNING  

>Once deactivated, your existing license will only be valid for 5 minutes to new logons.

## Developer license

If no license can be found, Zumasys grants a free 2-user developer license. There is nothing to do, and the license will not be validated. Simply run a jBASE program for the first time as shown below.

```bash
$ jsh
jBASE Licensing. No valid license found. Using 2 user developer license
License will expire in 14 days. To re-enable for another 14 days, you will need to log off all users and shut down background processes and services and remove IPC resources using 'jlicense ipc'
Set environment variable JBASE_DISABLE_DEVELOPER_LICENSE_WARNING to remove this message
jsh jbase ~ -->
```

Licensing on a no-network installation

The jBASE licensing model usually requires external network access to communicate with the license server. This is not only for the initial installation but every 7 days for re-validation of the license.

A small number of installations do not allow any external network access for security reasons. In this case [ TBD]

[Back to jBASE Licensing](./../README.md)

<PageFooter />
